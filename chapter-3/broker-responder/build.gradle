/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id 'com.blu.rsocket.java-application-conventions'

    id 'org.springframework.boot' version '3.0.6'
    id 'io.spring.dependency-management' version '1.1.0'

}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

group = 'com.blu.rsocket'
version = '0.0.1-SNAPSHOT'

dependencies {

    annotationProcessor 'org.projectlombok:lombok'
    implementation 'org.projectlombok:lombok'

    implementation 'com.alibaba.rsocket:alibaba-rsocket-core:1.1.4'
    implementation 'com.alibaba.rsocket:alibaba-rsocket-spring-boot-starter:1.1.4'
    implementation 'com.alibaba.rsocket:alibaba-rsocket-service-common:1.1.4'

    implementation 'org.springframework.boot:spring-boot-starter-webflux:3.0.6'
    implementation 'org.springframework.boot:spring-boot-starter-actuator:3.0.6'

    //api project(':services-api')
    implementation project(':services-api')
    implementation project(':service-config')
}

application {
    // Define the main class for the application.
    mainClass = 'com.blu.rsocket.responder.RsocketBrokerResponder'
}

task fatJar(type: Jar) {
    baseName = 'all-in-one-jar'
    manifest.attributes["Main-Class"] = "com.blu.rsocket.responder.RsocketBrokerResponder"
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}